{
    "manifest_version": 3,
    "name": "EGM Download and Annotation Plugin",
    "description": "A simple plugin to download and annotate remote monitoring EGMs",
    "version": "1.0",
    "permissions": [
        "activeTab",
        "storage",
        "unlimitedStorage",
        "scripting",
        "tabs",
        "webNavigation",
        "webRequest",
        "declarativeNetRequest",
        "declarativeNetRequestFeedback",
        "downloads",
        "cookies"
      ],
    "host_permissions": [
      "*://world.medtroniccarelink.net/*",
      "http://127.0.0.1:8000/*",
      "https://api-nl-prod.medtroniccarelink.net/*",
      "https://www.biotronik-homemonitoring.com/hmsc_guiWeb/patient/monitoring/*"
    ],
    "background": {
      "service_worker": "background.js",
      "type": "module"
    },
  "content_scripts": [
      {
          "matches": ["https://www.microport-smartview.com/BOWebUI/Clinic/PatientTransmissionHistory.aspx?*"],
          "js": ["microport_scraping.js", "content.js", "auth.js", "data_formatting.js"],
          "css": ["css/pdf-viewer.css"],
          "run_at": "document_start"
      },
      {
        "matches": ["https://www.biotronik-homemonitoring.com/hmsc_guiWeb/patient/monitoring/DisplayPatientContext.jsf*"],
        "js": ["biotronik_scraping.js", "content.js", "auth.js", "data_formatting.js"],
        "css": ["css/overlay-container.css"],
        "run_at": "document_start"
      },
      {
        "matches": ["https://www.latitudenxt.bostonscientific-international.com/clinic/devicepage/events*"],
        "js": ["content.js", "auth.js", "data_formatting.js", "boston_scraping.js"],
        "css": ["css/overlay-container.css"],
        "run_at": "document_start"
      },
      {
        "matches": ["https://world.medtroniccarelink.net/carelink.web/*"],
        "js": ["medtronic_scraping.js", "content.js", "auth.js", "data_formatting.js"],
        "css": ["css/pdf-viewer.css"],
        "run_at": "document_start"
      },
      {
        "matches": ["https://www.merlin.net/group/merlin-ep_b/transmission-details*"],
        "js": ["abbott_scraping.js", "content.js", "auth.js", "data_formatting.js"],
        "css": ["css/overlay-container.css"],
        "run_at": "document_start"
      }
  ],
  "web_accessible_resources": [
    {
      "resources": ["pdf.worker.js", "html/overlay-container.html", "html/pdf-viewer.html", "html/popup.js", "diagnosis-maps.json", "fonts/*"],
      "matches": ["<all_urls>"]
    }
  ],
  "action": {
      "default_popup": "html/popup.html"
  },
  "content_security_policy": {
    "extension_pages": "script-src 'self'; object-src 'self'; font-src 'self' https://fonts.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;"
  },
  "options_page": "html/options.html",
  "icons": {
    "16": "icons/icon16.png",
    "32": "icons/icon32.png",
    "48": "icons/icon48.png",
    "128": "icons/icon128.png"
  }
}